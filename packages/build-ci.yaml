build_ci:
  automation:
    - alias: System Travis Build Status
      trigger:
        - platform: state
          entity_id: sensor.jwbaarthassioconfig_last_build_state
          from: "started"
          to: "failed"
      action:
        - service: notify.jw
          data_template:
            message: >
              Travis build failed! {{ "\uD83E\uDD2C" }}
            data:
              url: https://travis-ci.org/jwbaart/hassio-config

    - alias: System Travis Build Passed
      trigger:
        - platform: state
          entity_id: sensor.jwbaarthassioconfig_last_build_state
          from: "started"
          to: "passed"
      action:
        - service: notify.jw
          data_template:
            message: >
              Travis build passed! {{ "\uD83D\uDC4D" }}
            data:
              url: https://travis-ci.org/jwbaart/hassio-config
        - service: hassio.addon_start
          data:
            addon: core_git_pull